@using Application.ViewModels.Ranking
@model List<CalculatedRankingVM>
@{
    ViewData["Title"] = "Home Page";
}
@if (ViewBag.ErrorMessage != null)
{
<div class="alert alert-danger alert-dismissible fade show" role="alert">
    @Html.Raw(ViewBag.ErrorMessage)
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
}
@if (ViewBag.ErrorMacro != null)
{
<div class="alert alert-danger alert-dismissible fade show" role="alert">
    @Html.Raw(ViewBag.ErrorMacro)
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
}

<div class="row-mb-2">
    <form asp-controller="Home" asp-action="Index" method="post">
        <select name="Year" class="form-select">
            @foreach (var year in ViewBag.AvailableYears)
            {
                <option value="@year">
                    @year
                </option>
            }
        </select>
        <button type="submit">Obtener Ranking</button>
    </form>
</div>

<div class="d-flex justify-content-center mt-4">
    <div class="table-responsive" style="max-width: 1300px;">
        <table class="table table-hover text-center align-middle">
            <thead class="table-light">
                <tr>
                    <th>País</th>
                    <th>Código ISO</th>
                    <th>Scoring</th>
                    <th>Tasa de Retorno</th>
                </tr>
            </thead>
            <tbody>
                @if(Model != null){
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.CountryName</td>
                        <td>@item.Code</td>
                        <td>@item.Scoring</td>
                        <td>@item.StimatedRate</td>
                    </tr>
                }
               }
            </tbody>
        </table>
    </div>
</div>